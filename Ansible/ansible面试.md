说一说你用过的Ansible模块有哪些？

file copy systemd user group unarchive apt yum mount ping
你们Ansible管理哪些项目？主要用来做什么？

你需要写哪些自动化部署和安装就可以写
Ansible有哪些模式？剧本和角色的区别是什么？

ad-hoc模式
剧本和角色的模式
说一说Ansible-playbook 常用命令

第一种 ansible ad-hoc命令方式
    ansible -i 主机ip组 ansible -i '10.0.0.1,10.0.0.2'
    ansible -m 模块 
    ansible -a ’指令内容，也就是你要在目标主机执行什么命令‘
第二种ansible-playbook
    -i 指定主机清单
    -e 输入环境变量
    -l 只执行某个主机
    -m 模块 
    -a ’指令内容，也就是你要在目标主机执行什么命令‘
    -f  100 100台机器并发执行
    -C 模拟执行，不做改变


Ansible通讯依赖什么协议？
ssh协议

不使用SSH密钥对连接，Ansible还能不能管理服务器？
可以管理
在ansible配置文件中配置不验证
在主机配置清单配置密码变量

ansible跑剧本时如何优化执行效率（100台服务器，安装JDK，如何同时安装，而不是一台一台装，如何调整并发模式，异步执行）
可以使用-f参数让100台服务器并发执行
还支持异步返回结果

ansible默认只会创建5个进程并发执行任务，所以一次任务只能同时控制5台机器执行。如果有大量的机器需要控制，例如20台，ansible执行一个任务时会先在其中5台上执行，执行成功后再执行下一批5台，直到全部机器执行完毕。使用-f选项可以指定进程数，指定的进程数量多一些，不仅会实现全并发，对异步的轮训poll也会有正面影响。

什么场景下会使用shell模块？
当需求和官方的模块不匹配的时候可以使用
当需要执行的命令官方没有这个模块的时候

你们公司用的什么堡垒机？管理流程是什么？
jumpserver
审计代码

Ansible主机清单配置的路径是什么？内容是什么？
 /etc/ansible/hosts

```
[主机组名]
ip地址 传入的变量

[all:vars] 
```

Ansible如何只让某个主机组生效变量如何做？

```
[想要生效的主机组:vars] 
定义变量
```

为什么使用Ansible？有什么优势？

ansible可以根据不同的主机组，也可以给单个主机组批量发送指令
可以做到集成部署
还有就是ansible的状态管理，你可以知道你发送的指令是成功还是失败还是跳过


写过Ansible剧本吗？介绍下剧本都有哪些组成
工作中需要使用到ansible剧本
 剧本需要定义执行的主机组hosts
 还有需要执行的任务列表
 tasks
 

你用过剧本的哪些功能？用在什么场景？
vars功能 执行的时候输入变量
tasks  任务清单
notify 当任务的状态发生变化的时候执行什么
handlers 配合notify执行具体的任务

Ansible剧本如何调试？写完直接就执行吗？
可以使用 -C调试
确认无误后再真正执行



Ansible用过role吗？和playbook有什么区别？（注意，面试官可能会说的是英文）
roles角色是将很多服务写到一个大型项目的目录里面去执行，这样写方便管理
playbook是单独一个文件

你们用Ansible角色做过哪些优化？
按照服务名作为一个个单独的角色


