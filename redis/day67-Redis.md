---
tags:
  - Redis
---
```shell
1.既然有了哨兵，为什么还有需要集群？
哨兵只能有一个主库为写，磁盘利用率低，集群架构所有的库为主库

2.Redis集群的搭建流程是什么？
所有主库安装好redis
创建槽
各个主库互相发现
建立主从关系
各个主库分配槽

3.Redis集群需要多少台机器？为什么？
最少需要2台
2台才能故障转移

4.Redis集群如何知道数据该存到哪个节点？又是如何读取的？
利用hash算法会尽力平均分配
使用高效的hash算法读取

5.Redis集群如何扩容节点？
redis-cli --cluster reshard 

6.Redis集群如何缩容节点？
1:使用redis-cli --cluster reshard

2:redis-cli --cluster rebalance
将要缩容的的权重=0

7.Redis集群如何判断状态是否正常？
redis-cli --cluster check ip:port

8.Redis集群节点故障修复流程是什么？
redis集群当其中一台故障后,定义的从库会自动故障转移为新主库
当主库修好后,会自动作为新主库的从库
此时在从库输入CLUSTER FAILOVER
会自动交换关系,新主库变为从库

9.Redis集群如何保证高可用？
做好主从关系
监控好集群的状态
及时修复坏掉的主库

10.Redis集群在数据迁移的过程中，是否影响正常的数据读写？如何设计实验？
redis槽的迁移是实时的,如果宕机了会终止迁移,redis会自动故障转移,不影响数据的读写,在迁移的同时,实验一个for循环写入

11.Redis集群迁移过程中，如果机器宕机了，要如何应对？
redis槽的迁移是实时的,如果宕机了会终止迁移,在宕机之前已经迁移的槽会成功迁移,没有迁移的槽还是原来的位置,自动故障转移的机器会转移旧主库的槽到新主库,

12.Redis集群如何备份与恢复数据？
主库和从库都需要做AOF和RDB备份

```
