

1. **Statement-Based Logging (SBL)**:
声明模式

- **作用**: 在这种模式下，binlog记录的是执行的SQL语句，而不是语句的实际结果。
- **优点**: 可以减少binlog的大小，因为只记录了SQL语句。
- **缺点**: 在某些情况下可能导致数据不一致，尤其是在涉及到函数如NOW()或RAND()这类非确定性函数的时候。

2. **Row-Based Logging (RBL)**:
行模式
- **作用**: 在这种模式下，binlog记录的是语句执行后的实际结果，即哪些行被修改了。
- **优点**: 可以确保数据的一致性，适用于复制和恢复场景。
- **缺点**: 可能会导致binlog的大小显著增加，尤其是在处理大量数据修改的时候。

3. **Mixed Logging (MIXED)**:

- **作用**: 这种模式结合了SBL和RBL的特点。默认情况下使用SBL，但在某些情况下，如当涉及到非确定性函数时，会自动切换到RBL。
- **优点**: 平衡了SBL和RBL的优缺点，提供了更灵活的日志记录方式。
- **缺点**: 操作更为复杂，可能需要更多的管理和监控。

举例：Statement-Based Logging可能会导致的问题

```
INSERT INTO t100w (num, k1, k2, dt) 
VALUES (401401, 'av', 'avze', NOW());

Statement--数据不对了
INSERT INTO t100w (num, k1, k2, dt) 
VALUES (401401, 'av', 'avze', NOW());

Row--数据正确
INSERT INTO t100w (num, k1, k2, dt) 
VALUES (401401, 'av', 'avze', 2024-01-09 09:39:21);

在这个例子中，NOW()函数用于获取当前的日期和时间。当这条语句在主服务器上执行时，它会插入一条带有特定时间戳的记录。这条语句随后被复制到从服务器的二进制日志中。

问题出现在从服务器上执行这条语句时。如果从服务器处理这条日志记录的时间稍微晚一些，那么NOW()函数会生成一个与主服务器上不同的时间戳。结果是，尽管订单号（由于自动递增）在主从服务器上保持一致，但订单日期在两个服务器上却是不同的。这就导致了数据不一致。

这种类型的问题是SBL模式的一个主要缺点，尤其是在涉及到使用非确定性函数（比如NOW(), RAND(), UUID()等）的场景中。为了避免这类问题，可以选择使用Row-Based Logging（RBL）模式，它记录的是数据变化的实际结果，而不是导致这些变化的SQL语句。
```
声明模式不会记录时间戳
行模式会记录时间戳

混合模式可以将两个根据需要自动切换